var re=Object.defineProperty;var se=(e,t,i)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var c=(e,t,i)=>se(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const kt=!1;var Nt=Array.isArray,oe=Array.prototype.indexOf,ae=Array.from,le=Object.defineProperty,j=Object.getOwnPropertyDescriptor,ue=Object.getOwnPropertyDescriptors,fe=Object.prototype,he=Array.prototype,Ct=Object.getPrototypeOf;function ce(e){for(var t=0;t<e.length;t++)e[t]()}const T=2,Lt=4,mt=8,yt=16,N=32,K=64,et=128,b=256,it=512,E=1024,C=2048,$=4096,nt=8192,ft=16384,de=32768,pe=65536,ve=1<<19,Ht=1<<20,Z=Symbol("$state"),_e=Symbol("");function Ut(e){return e===this.v}function ge(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function we(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function me(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ye(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Me(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Se(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function be(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Ee(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ht=!1,ke=!1;function Te(){ht=!0}const Pe=2,y=Symbol();function Ae(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let g=null;function Tt(e){g=e}function Yt(e,t=!1,i){g={p:g,c:null,e:null,m:!1,s:e,x:null,l:null},ht&&!t&&(g.l={s:null,u:null,r1:[],r2:P(!1)})}function Wt(e){const t=g;if(t!==null){const o=t.e;if(o!==null){var i=_,n=v;t.e=null;try{for(var r=0;r<o.length;r++){var s=o[r];B(s.effect),q(s.reaction),Mt(s.fn)}}finally{B(i),q(n)}}g=t.p,t.m=!0}return{}}function ct(){return!ht||g!==null&&g.l===null}function P(e,t){var i={f:0,v:e,reactions:null,equals:Ut,rv:0,wv:0};return i}function Pt(e){return De(P(e))}function De(e){return v!==null&&!k&&(v.f&T)!==0&&(D===null?Ze([e]):D.push(e)),e}function A(e,t){return v!==null&&!k&&ct()&&(v.f&(T|yt))!==0&&(D===null||!D.includes(e))&&Ee(),ze(e,t)}function ze(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=te(),Xt(e,C),ct()&&_!==null&&(_.f&E)!==0&&(_.f&(N|K))===0&&(z===null?Je([e]):z.push(e))),t}function Xt(e,t){var i=e.reactions;if(i!==null)for(var n=ct(),r=i.length,s=0;s<r;s++){var o=i[s],p=o.f;(p&C)===0&&(!n&&o===_||(O(o,t),(p&(E|b))!==0&&((p&T)!==0?Xt(o,$):Et(o))))}}function I(e,t=null,i){if(typeof e!="object"||e===null||Z in e)return e;const n=Ct(e);if(n!==fe&&n!==he)return e;var r=new Map,s=Nt(e),o=P(0);s&&r.set("length",P(e.length));var p;return new Proxy(e,{defineProperty(h,a,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Me();var f=r.get(a);return f===void 0?(f=P(u.value),r.set(a,f)):A(f,I(u.value,p)),!0},deleteProperty(h,a){var u=r.get(a);if(u===void 0)a in h&&r.set(a,P(y));else{if(s&&typeof a=="string"){var f=r.get("length"),l=Number(a);Number.isInteger(l)&&l<f.v&&A(f,l)}A(u,y),At(o)}return!0},get(h,a,u){var w;if(a===Z)return e;var f=r.get(a),l=a in h;if(f===void 0&&(!l||(w=j(h,a))!=null&&w.writable)&&(f=P(I(l?h[a]:y,p)),r.set(a,f)),f!==void 0){var d=H(f);return d===y?void 0:d}return Reflect.get(h,a,u)},getOwnPropertyDescriptor(h,a){var u=Reflect.getOwnPropertyDescriptor(h,a);if(u&&"value"in u){var f=r.get(a);f&&(u.value=H(f))}else if(u===void 0){var l=r.get(a),d=l==null?void 0:l.v;if(l!==void 0&&d!==y)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(h,a){var d;if(a===Z)return!0;var u=r.get(a),f=u!==void 0&&u.v!==y||Reflect.has(h,a);if(u!==void 0||_!==null&&(!f||(d=j(h,a))!=null&&d.writable)){u===void 0&&(u=P(f?I(h[a],p):y),r.set(a,u));var l=H(u);if(l===y)return!1}return f},set(h,a,u,f){var L;var l=r.get(a),d=a in h;if(s&&a==="length")for(var w=u;w<l.v;w+=1){var S=r.get(w+"");S!==void 0?A(S,y):w in h&&(S=P(y),r.set(w+"",S))}l===void 0?(!d||(L=j(h,a))!=null&&L.writable)&&(l=P(void 0),A(l,I(u,p)),r.set(a,l)):(d=l.v!==y,A(l,I(u,p)));var Y=Reflect.getOwnPropertyDescriptor(h,a);if(Y!=null&&Y.set&&Y.set.call(f,u),!d){if(s&&typeof a=="string"){var V=r.get("length"),W=Number(a);Number.isInteger(W)&&W>=V.v&&A(V,W+1)}At(o)}return!0},ownKeys(h){H(o);var a=Reflect.ownKeys(h).filter(l=>{var d=r.get(l);return d===void 0||d.v!==y});for(var[u,f]of r)f.v!==y&&!(u in h)&&a.push(u);return a},setPrototypeOf(){Se()}})}function At(e,t=1){A(e,e.v+t)}var Dt,qt,Bt,$t;function Ie(){if(Dt===void 0){Dt=window,qt=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype;Bt=j(t,"firstChild").get,$t=j(t,"nextSibling").get,e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Fe(e=""){return document.createTextNode(e)}function jt(e){return Bt.call(e)}function Re(e){return $t.call(e)}function Oe(e,t){return jt(e)}function Ne(e){var t=T|C,i=v!==null&&(v.f&T)!==0?v:null;return _===null||i!==null&&(i.f&b)!==0?t|=b:_.f|=Ht,{ctx:g,deps:null,effects:null,equals:Ut,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:i??_}}function Kt(e){var t=e.effects;if(t!==null){e.effects=null;for(var i=0;i<t.length;i+=1)U(t[i])}}function Ce(e){for(var t=e.parent;t!==null;){if((t.f&T)===0)return t;t=t.parent}return null}function Le(e){var t,i=_;B(Ce(e));try{Kt(e),t=ie(e)}finally{B(i)}return t}function xt(e){var t=Le(e),i=(R||(e.f&b)!==0)&&e.deps!==null?$:E;O(e,i),e.equals(t)||(e.v=t,e.wv=te())}function He(e){_===null&&v===null&&me(),v!==null&&(v.f&b)!==0&&_===null&&we(),St&&ge()}function Ue(e,t){var i=t.last;i===null?t.last=t.first=e:(i.next=e,e.prev=i,t.last=e)}function x(e,t,i,n=!0){var r=(e&K)!==0,s=_,o={ctx:g,deps:null,nodes_start:null,nodes_end:null,f:e|C,first:null,fn:t,last:null,next:null,parent:r?null:s,prev:null,teardown:null,transitions:null,wv:0};if(i)try{bt(o),o.f|=de}catch(a){throw U(o),a}else t!==null&&Et(o);var p=i&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(Ht|et))===0;if(!p&&!r&&n&&(s!==null&&Ue(o,s),v!==null&&(v.f&T)!==0)){var h=v;(h.effects??(h.effects=[])).push(o)}return o}function Ye(e){He();var t=_!==null&&(_.f&N)!==0&&g!==null&&!g.m;if(t){var i=g;(i.e??(i.e=[])).push({fn:e,effect:_,reaction:v})}else{var n=Mt(e);return n}}function We(e){const t=x(K,e,!0);return(i={})=>new Promise(n=>{i.outro?Ke(t,()=>{U(t),n(void 0)}):(U(t),n(void 0))})}function Mt(e){return x(Lt,e,!1)}function Xe(e){return x(mt,e,!0)}function qe(e,t=[],i=Ne){const n=t.map(i);return Be(()=>e(...n.map(H)))}function Be(e,t=0){return x(mt|yt|t,e,!0)}function $e(e,t=!0){return x(mt|N,e,!0,t)}function Vt(e){var t=e.teardown;if(t!==null){const i=St,n=v;zt(!0),q(null);try{t.call(null)}finally{zt(i),q(n)}}}function Gt(e,t=!1){var i=e.first;for(e.first=e.last=null;i!==null;){var n=i.next;U(i,t),i=n}}function je(e){for(var t=e.first;t!==null;){var i=t.next;(t.f&N)===0&&U(t),t=i}}function U(e,t=!0){var i=!1;if((t||(e.f&ve)!==0)&&e.nodes_start!==null){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:Re(n);n.remove(),n=s}i=!0}Gt(e,t&&!i),at(e,0),O(e,ft);var o=e.transitions;if(o!==null)for(const h of o)h.stop();Vt(e);var p=e.parent;p!==null&&p.first!==null&&Zt(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Zt(e){var t=e.parent,i=e.prev,n=e.next;i!==null&&(i.next=n),n!==null&&(n.prev=i),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=i))}function Ke(e,t){var i=[];Jt(e,i,!0),xe(i,()=>{U(e),t&&t()})}function xe(e,t){var i=e.length;if(i>0){var n=()=>--i||t();for(var r of e)r.out(n)}else t()}function Jt(e,t,i){if((e.f&nt)===0){if(e.f^=nt,e.transitions!==null)for(const o of e.transitions)(o.is_global||i)&&t.push(o);for(var n=e.first;n!==null;){var r=n.next,s=(n.f&pe)!==0||(n.f&N)!==0;Jt(n,t,s?i:!1),n=r}}}let rt=[];function Ve(){var e=rt;rt=[],ce(e)}function Ge(e){rt.length===0&&queueMicrotask(Ve),rt.push(e)}let J=!1,vt=!1,st=null,Q=!1,St=!1;function zt(e){St=e}let tt=[];let v=null,k=!1;function q(e){v=e}let _=null;function B(e){_=e}let D=null;function Ze(e){D=e}let m=null,M=0,z=null;function Je(e){z=e}let Qt=1,ot=0,R=!1;function te(){return++Qt}function dt(e){var f;var t=e.f;if((t&C)!==0)return!0;if((t&$)!==0){var i=e.deps,n=(t&b)!==0;if(i!==null){var r,s,o=(t&it)!==0,p=n&&_!==null&&!R,h=i.length;if(o||p){var a=e,u=a.parent;for(r=0;r<h;r++)s=i[r],(o||!((f=s==null?void 0:s.reactions)!=null&&f.includes(a)))&&(s.reactions??(s.reactions=[])).push(a);o&&(a.f^=it),p&&u!==null&&(u.f&b)===0&&(a.f^=b)}for(r=0;r<h;r++)if(s=i[r],dt(s)&&xt(s),s.wv>e.wv)return!0}(!n||_!==null&&!R)&&O(e,E)}return!1}function Qe(e,t){for(var i=t;i!==null;){if((i.f&et)!==0)try{i.fn(e);return}catch{i.f^=et}i=i.parent}throw J=!1,e}function ti(e){return(e.f&ft)===0&&(e.parent===null||(e.parent.f&et)===0)}function pt(e,t,i,n){if(J){if(i===null&&(J=!1),ti(t))throw e;return}i!==null&&(J=!0);{Qe(e,t);return}}function ee(e,t,i=!0){var n=e.reactions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];(s.f&T)!==0?ee(s,t,!1):t===s&&(i?O(s,C):(s.f&E)!==0&&O(s,$),Et(s))}}function ie(e){var d;var t=m,i=M,n=z,r=v,s=R,o=D,p=g,h=k,a=e.f;m=null,M=0,z=null,R=(a&b)!==0&&(k||!Q||v===null),v=(a&(N|K))===0?e:null,D=null,Tt(e.ctx),k=!1,ot++;try{var u=(0,e.fn)(),f=e.deps;if(m!==null){var l;if(at(e,M),f!==null&&M>0)for(f.length=M+m.length,l=0;l<m.length;l++)f[M+l]=m[l];else e.deps=f=m;if(!R)for(l=M;l<f.length;l++)((d=f[l]).reactions??(d.reactions=[])).push(e)}else f!==null&&M<f.length&&(at(e,M),f.length=M);if(ct()&&z!==null&&!k&&f!==null&&(e.f&(T|$|C))===0)for(l=0;l<z.length;l++)ee(z[l],e);return r!==null&&ot++,u}finally{m=t,M=i,z=n,v=r,R=s,D=o,Tt(p),k=h}}function ei(e,t){let i=t.reactions;if(i!==null){var n=oe.call(i,e);if(n!==-1){var r=i.length-1;r===0?i=t.reactions=null:(i[n]=i[r],i.pop())}}i===null&&(t.f&T)!==0&&(m===null||!m.includes(t))&&(O(t,$),(t.f&(b|it))===0&&(t.f^=it),Kt(t),at(t,0))}function at(e,t){var i=e.deps;if(i!==null)for(var n=t;n<i.length;n++)ei(e,i[n])}function bt(e){var t=e.f;if((t&ft)===0){O(e,E);var i=_,n=g,r=Q;_=e,Q=!0;try{(t&yt)!==0?je(e):Gt(e),Vt(e);var s=ie(e);e.teardown=typeof s=="function"?s:null,e.wv=Qt;var o=e.deps,p;kt&&ke&&e.f&C}catch(h){pt(h,e,i,n||e.ctx)}finally{Q=r,_=i}}}function ii(){try{ye()}catch(e){if(st!==null)pt(e,st,null);else throw e}}function ni(){try{for(var e=0;tt.length>0;){e++>1e3&&ii();var t=tt,i=t.length;tt=[];for(var n=0;n<i;n++){var r=t[n];(r.f&E)===0&&(r.f^=E);var s=si(r);ri(s)}}}finally{vt=!1,st=null}}function ri(e){var t=e.length;if(t!==0)for(var i=0;i<t;i++){var n=e[i];if((n.f&(ft|nt))===0)try{dt(n)&&(bt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Zt(n):n.fn=null))}catch(r){pt(r,n,null,n.ctx)}}}function Et(e){vt||(vt=!0,queueMicrotask(ni));for(var t=st=e;t.parent!==null;){t=t.parent;var i=t.f;if((i&(K|N))!==0){if((i&E)===0)return;t.f^=E}}tt.push(t)}function si(e){var t=[],i=e.first;t:for(;i!==null;){var n=i.f,r=(n&N)!==0,s=r&&(n&E)!==0,o=i.next;if(!s&&(n&nt)===0){if((n&Lt)!==0)t.push(i);else if(r)i.f^=E;else{var p=v;try{v=i,dt(i)&&bt(i)}catch(u){pt(u,i,null,i.ctx)}finally{v=p}}var h=i.first;if(h!==null){i=h;continue}}if(o===null){let u=i.parent;for(;u!==null;){if(e===u)break t;var a=u.next;if(a!==null){i=a;continue t}u=u.parent}}i=o}return t}function H(e){var t=e.f,i=(t&T)!==0;if(v!==null&&!k){D!==null&&D.includes(e)&&be();var n=v.deps;e.rv<ot&&(e.rv=ot,m===null&&n!==null&&n[M]===e?M++:m===null?m=[e]:(!R||!m.includes(e))&&m.push(e))}else if(i&&e.deps===null&&e.effects===null){var r=e,s=r.parent;s!==null&&(s.f&b)===0&&(r.f^=b)}return i&&(r=e,dt(r)&&xt(r)),e.v}function ne(e){var t=k;try{return k=!0,e()}finally{k=t}}const oi=-7169;function O(e,t){e.f=e.f&oi|t}const ai=["touchstart","touchmove"];function li(e){return ai.includes(e)}const ui=new Set,It=new Set;function G(e){var W;var t=this,i=t.ownerDocument,n=e.type,r=((W=e.composedPath)==null?void 0:W.call(e))||[],s=r[0]||e.target,o=0,p=e.__root;if(p){var h=r.indexOf(p);if(h!==-1&&(t===document||t===window)){e.__root=t;return}var a=r.indexOf(t);if(a===-1)return;h<=a&&(o=h)}if(s=r[o]||e.target,s!==t){le(e,"currentTarget",{configurable:!0,get(){return s||i}});var u=v,f=_;q(null),B(null);try{for(var l,d=[];s!==null;){var w=s.assignedSlot||s.parentNode||s.host||null;try{var S=s["__"+n];if(S!==void 0&&(!s.disabled||e.target===s))if(Nt(S)){var[Y,...V]=S;Y.apply(s,[e,...V])}else S.call(s,e)}catch(L){l?d.push(L):l=L}if(e.cancelBubble||w===t||w===null)break;s=w}if(l){for(let L of d)queueMicrotask(()=>{throw L});throw l}}finally{e.__root=t,delete e.currentTarget,q(u),B(f)}}}function fi(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function hi(e,t){var i=_;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=t)}function ci(e,t){var i=(t&Pe)!==0,n,r=!e.startsWith("<!>");return()=>{n===void 0&&(n=fi(r?e:"<!>"+e),n=jt(n));var s=i||qt?document.importNode(n,!0):n.cloneNode(!0);return hi(s,s),s}}function di(e,t){e!==null&&e.before(t)}function pi(e,t){return vi(e,t)}const X=new Map;function vi(e,{target:t,anchor:i,props:n={},events:r,context:s,intro:o=!0}){Ie();var p=new Set,h=f=>{for(var l=0;l<f.length;l++){var d=f[l];if(!p.has(d)){p.add(d);var w=li(d);t.addEventListener(d,G,{passive:w});var S=X.get(d);S===void 0?(document.addEventListener(d,G,{passive:w}),X.set(d,1)):X.set(d,S+1)}}};h(ae(ui)),It.add(h);var a=void 0,u=We(()=>{var f=i??t.appendChild(Fe());return $e(()=>{if(s){Yt({});var l=g;l.c=s}r&&(n.$$events=r),a=e(f,n)||{},s&&Wt()}),()=>{var w;for(var l of p){t.removeEventListener(l,G);var d=X.get(l);--d===0?(document.removeEventListener(l,G),X.delete(l)):X.set(l,d)}It.delete(h),f!==i&&((w=f.parentNode)==null||w.removeChild(f))}});return _i.set(a,u),a}let _i=new WeakMap;function Ft(e,t,i,n){var r=e.__attributes??(e.__attributes={});r[t]!==(r[t]=i)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[_e]=i),i==null?e.removeAttribute(t):typeof i!="string"&&gi(e).includes(t)?e[t]=i:e.setAttribute(t,i))}var Rt=new Map;function gi(e){var t=Rt.get(e.nodeName);if(t)return t;Rt.set(e.nodeName,t=[]);for(var i,n=e,r=Element.prototype;r!==n;){i=ue(n);for(var s in i)i[s].set&&t.push(s);n=Ct(n)}return t}function Ot(e,t){return e===t||(e==null?void 0:e[Z])===t}function wi(e={},t,i,n){return Mt(()=>{var r,s;return Xe(()=>{r=s,s=[],ne(()=>{e!==i(...s)&&(t(e,...s),r&&Ot(i(...r),e)&&t(null,...r))})}),()=>{Ge(()=>{s&&Ot(i(...s),e)&&t(null,...s)})}}),e}function mi(e){g===null&&Ae(),ht&&g.l!==null?yi(g).m.push(e):Ye(()=>{const t=ne(e);if(typeof t=="function")return t})}function yi(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Mi="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mi);const lt=class lt{constructor(){c(this,"frameTimes",[]);c(this,"lastTime",performance.now());c(this,"fps",0)}update(t){const i=performance.now(),n=i-this.lastTime;this.lastTime=i,this.frameTimes.push(n),this.frameTimes.length>lt.MAX_SAMPLE&&this.frameTimes.shift();const r=this.frameTimes.reduce((s,o)=>s+o,0)/this.frameTimes.length;this.fps=1e3/r}draw(t){t.fillStyle="black",t.fillRect(0,0,150,50),t.fillStyle="white",t.font="14px Arial",t.fillText(`FPS: ${this.fps.toFixed(1)}`,10,20)}};c(lt,"MAX_SAMPLE",100);let _t=lt;class Si{constructor(t,i=500,n=.1){this.position=t,this.edgeMargin=i,this.smoothingFactor=n}update(t,i,n,r,s,o){const p=Math.max(0,n-s),h=Math.max(0,r-o);let[a,u]=this.position.unpack();const[f,l]=i.unpack(),d=this.edgeMargin;f<this.position.x+d?a=Math.max(0,f-d):f>this.position.x+s-d&&(a=Math.min(p,f+d-s)),l<this.position.y+d?u=Math.max(0,l-d):l>this.position.y+o-d&&(u=Math.min(h,l+d-o)),this.position.x+=(a-this.position.x)*this.smoothingFactor*t,this.position.y+=(u-this.position.y)*this.smoothingFactor*t,this.position.x=Math.max(0,Math.min(this.position.x,p)),this.position.y=Math.max(0,Math.min(this.position.y,h))}}class F{constructor(t=0,i=0){this.x=t,this.y=i}unpack(){return[this.x,this.y]}sub(t){return new F(this.x-t.x,this.y-t.y)}lengh(){return Math.sqrt(this.x**2+this.y**2)}distance(t){return this.sub(t).lengh()}clone(){return new F(this.x,this.y)}}const bi="src/assets",Ei=e=>{const t=Math.floor(e/60),i=e%60;return[t,i]};class ki{constructor(t){c(this,"img");const i=new Image;i.src=`${bi}${t}`,this.img=i}getSize(t=1){return[this.img.width*t,this.img.height*t]}get handle(){return this.img}}class Ti{constructor(t){c(this,"debug",!1);c(this,"speed",.5);c(this,"angle",0);c(this,"sprite");c(this,"direction",0);c(this,"scaleFactor",.5);c(this,"turnRate",.03);c(this,"bankAngle",0);c(this,"maxBankAngle",Math.PI/10);c(this,"bankSmoothing",.05);this.position=t,this.sprite=new ki("/aircraft2.png")}update(t){const i=this.direction*this.maxBankAngle;this.bankAngle+=(i-this.bankAngle)*this.bankSmoothing*t,this.angle+=this.direction*this.turnRate,this.position.x+=Math.cos(this.angle)*this.speed*t,this.position.y+=Math.sin(this.angle)*this.speed*t}get size(){return this.sprite.getSize(this.scaleFactor)}turnTo(t){this.direction=t}draw(t){const[i,n]=this.position.unpack(),[r,s]=this.size;t.save(),t.translate(i,n),t.rotate(this.angle+Math.PI/2+this.bankAngle),t.drawImage(this.sprite.handle,-r,-s,r,s),this.debug&&(t.strokeStyle="green",t.rect(-r,-s,r,s),t.stroke()),t.restore()}}class Pi{constructor(t,i){c(this,"size");c(this,"color");this.position=t;const n=Math.max(.3,Math.min(1,1-this.position.y/i));this.size=40+n*80;const r=.3+n*.5;this.color=`rgba(230, 230, 230, ${r})`}draw(t){const[i,n]=this.position.unpack();t.fillStyle=this.color,t.beginPath(),t.arc(i,n,this.size*.6,0,Math.PI*2),t.arc(i+this.size*.5,n-this.size*.3,this.size*.4,0,Math.PI*2),t.arc(i-this.size*.5,n-this.size*.3,this.size*.4,0,Math.PI*2),t.arc(i+this.size*.8,n,this.size*.3,0,Math.PI*2),t.arc(i-this.size*.8,n,this.size*.3,0,Math.PI*2),t.closePath(),t.fill()}}var gt=(e=>(e.W="w",e.A="a",e.S="s",e.D="d",e.Space=" ",e.Escape="Escape",e))(gt||{});class Ai{constructor(){c(this,"keys");c(this,"mouseXY");c(this,"buttons");c(this,"keyDownHandler");c(this,"keyUpHandler");c(this,"mouseDownHandler");c(this,"mouseUpHandler");this.mouseXY=[0,0],this.keys=new Set,this.buttons=new Set,this.keyDownHandler=this.onKeyDown.bind(this),this.keyUpHandler=this.onKeyUp.bind(this),this.mouseDownHandler=this.onMouseDown.bind(this),this.mouseUpHandler=this.onMouseUp.bind(this)}bindWindowAndDocument(){this.unbindWindowAndDocument(),window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("keyup",this.keyUpHandler),document.addEventListener("mousedown",this.mouseDownHandler),document.addEventListener("mouseup",this.mouseUpHandler)}unbindWindowAndDocument(){window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("keyup",this.keyUpHandler),document.removeEventListener("mousedown",this.mouseDownHandler),document.removeEventListener("mouseup",this.mouseUpHandler)}onMouseDown(t){this.buttons.add(t.button)}onMouseUp(t){this.buttons.delete(t.button)}onKeyDown(t){this.keys.add(t.key)}onKeyUp(t){this.keys.delete(t.key)}getMouseXY(){return this.mouseXY}isKeyDown(t){return this.keys.has(t)}isMouseDown(t){return this.buttons.has(t)}}class Di{constructor(t){c(this,"step");c(this,"circleRadius",10);c(this,"starRadius");c(this,"rotationSpeed",.002);c(this,"spike",5);c(this,"starSizeFactor",.7);c(this,"angle",0);this.position=t,this.step=Math.PI/this.spike,this.starRadius=this.circleRadius*this.starSizeFactor}update(t){this.angle-=this.rotationSpeed*t}draw(t){const[i,n]=this.position.unpack();t.fillStyle="white",t.beginPath(),t.arc(i,n,this.circleRadius,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),t.save(),t.translate(i,n),t.rotate(this.angle),t.beginPath(),t.fillStyle="yellow";for(let r=0;r<this.spike;r++){let s=r*2*Math.PI/this.spike,o=this.starRadius*Math.cos(s),p=this.starRadius*Math.sin(s);t.lineTo(o,p),s+=this.step,o=this.starRadius/2*Math.cos(s),p=this.starRadius/2*Math.sin(s),t.lineTo(o,p)}t.closePath(),t.stroke(),t.fill(),t.restore()}}const ut=class ut{constructor(t,i){c(this,"angle",0);c(this,"turnRate",.002);c(this,"speed",.6);this.position=t,this.target=i}update(t){const i=this.target.sub(this.position),r=(Math.atan2(i.y,i.x)-this.angle+Math.PI)%(2*Math.PI)-Math.PI;this.angle+=Math.sign(r)*Math.min(Math.abs(r),this.turnRate*t),this.position.x+=Math.cos(this.angle)*this.speed*t,this.position.y+=Math.sin(this.angle)*this.speed*t}checkCollision(t){return this===t?!1:this.position.distance(t.position)<=ut.collisionThreshold}draw(t){t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.angle+Math.PI/2),t.fillStyle="gray",t.beginPath(),t.moveTo(0,-15),t.lineTo(-5,-10),t.lineTo(-5,10),t.lineTo(5,10),t.lineTo(5,-10),t.closePath(),t.fill(),t.fillStyle="darkgray",t.beginPath(),t.moveTo(-5,10),t.lineTo(-10,20),t.lineTo(0,15),t.closePath(),t.fill(),t.beginPath(),t.moveTo(5,10),t.lineTo(10,20),t.lineTo(0,15),t.closePath(),t.fill(),t.fillStyle="orange",t.beginPath(),t.moveTo(-3,15),t.lineTo(0,30),t.lineTo(3,15),t.closePath(),t.fill(),t.restore()}};c(ut,"collisionThreshold",20);let wt=ut;class zi{constructor(t,i=1200){c(this,"elapsedTime",0);c(this,"maxSize");c(this,"isFinished",!1);c(this,"particles",[]);this.position=t,this.duration=i,this.maxSize=50+Math.random()*50,this.generateParticles()}generateParticles(){const t=10+Math.random()*20;for(let i=0;i<t;i++){const n=Math.random()*Math.PI*2,r=1+Math.random()*2;this.particles.push({x:this.position.x,y:this.position.y,size:5+Math.random()*10,velocity:new F(Math.cos(n)*r,Math.sin(n)*r),life:.5+Math.random()*.5})}}update(t){this.elapsedTime+=t,this.elapsedTime>=this.duration&&(this.isFinished=!0),this.particles.forEach(i=>{i.x+=i.velocity.x*t*100,i.y+=i.velocity.y*t*100,i.life-=t}),this.particles=this.particles.filter(i=>i.life>0)}draw(t){const i=this.elapsedTime/this.duration,n=this.maxSize*i,r=1-i;t.save(),t.translate(this.position.x,this.position.y),t.fillStyle=`rgba(255, ${150+Math.random()*100}, 0, ${r})`,t.beginPath(),t.arc(0,0,n,0,Math.PI*2),t.fill(),this.particles.forEach(s=>{t.fillStyle=`rgba(255, ${Math.random()*255}, 0, ${s.life})`,t.beginPath(),t.arc(s.x-this.position.x,s.y-this.position.y,s.size,0,Math.PI*2),t.fill()}),t.restore()}}class Ii{constructor(t){c(this,"startTime",Date.now());c(this,"maxMissilePool",3);c(this,"missileSpawnIntv",5e3);c(this,"input");c(this,"clouds",[]);c(this,"perfM");c(this,"camera");c(this,"aircraft");c(this,"worldSizeFactor",5);c(this,"star",null);c(this,"missiles",new Set);c(this,"explosions",[]);this.canvas=t,this.perfM=new _t;const[i,n]=this.canvasMidpoint;this.aircraft=new Ti(new F(i,n)),this.camera=new Si(new F),this.populateClouds(),this.spawnStar(),this.startMissileSpawn(),this.input=new Ai,this.input.bindWindowAndDocument()}update(t){var r;const[i,n]=this.getWorldSize();this.updateAircraft(t),this.handleBounds(i,n);for(const s of this.missiles){s.update(t);for(const o of this.missiles)s.checkCollision(o)&&(this.missiles.delete(s),this.missiles.delete(o),this.explosions.push(new zi(s.position)))}for(const s of this.explosions)s.isFinished||s.update(t);this.camera.update(t,this.aircraft.position,i,n,this.canvas.width,this.canvas.height),(r=this.star)==null||r.update(t),this.perfM.update(t)}updateAircraft(t){let i=0;this.input.isKeyDown(gt.A)&&(i=-1),this.input.isKeyDown(gt.D)&&(i=1),this.aircraft.turnTo(i),this.aircraft.update(t)}handleBounds(t,i){const[n,r]=this.aircraft.size;this.aircraft.position.x+n>t?this.aircraft.position.x=t-n:this.aircraft.position.x<0&&(this.aircraft.position.x=0),this.aircraft.position.y+r>i?this.aircraft.position.y=i-r:this.aircraft.position.y<0&&(this.aircraft.position.y=0)}isOffScreen(t,i,n,r=0){const[s,o]=[this.canvas.width,this.canvas.height],[p,h]=this.camera.position.unpack();return t.x+i<p-r||t.x>p+s+r||t.y+n<h-r||t.y>h+o+r}render(t){var i;t.clearRect(0,0,this.canvas.width,this.canvas.height),t.save(),t.translate(-this.camera.position.x,-this.camera.position.y);for(const n of this.clouds)this.isOffScreen(n.position,n.size,n.size,100)||n.draw(t);for(const n of this.explosions)n.isFinished||n.draw(t);(i=this.star)==null||i.draw(t),this.aircraft.draw(t);for(const n of this.missiles)n.draw(t);t.restore(),this.drawUI(t),this.perfM.draw(t)}drawUI(t){const i=Ei(Math.floor((Date.now()-this.startTime)/1e3)).join(":"),n=this.getScore();t.save(),t.font="bold 36px Monaco",t.textAlign="left",t.textBaseline="top",t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(20,100,t.measureText(`Score: ${n}`).width+40,100),t.fillStyle="white",t.shadowColor="rgba(0, 0, 0, 0.8)",t.shadowBlur=10,t.fillText(`Time: ${i}`,30,110),t.fillText(`Score: ${n}`,30,150),t.restore()}getScore(){return 10}populateClouds(){const[t,i]=this.getWorldSize(),r=Math.ceil(t*i*1e-4),s=Math.ceil(Math.sqrt(r)*1.5),o=Math.ceil(r/s),p=t/s,h=i/o;for(let a=0;a<o;a++)for(let u=0;u<s&&!(this.clouds.length>=r);u++){const f=(u+Math.random()*.8)*p,l=(a+Math.random()*.8)*h;this.clouds.push(new Pi(new F(f,l),this.canvas.height))}}spawnStar(){if(this.star)return;const[t,i]=this.canvasMidpoint;setTimeout(()=>{this.star=new Di(new F(t-100,i-100))},0)}startMissileSpawn(){const[t,i]=this.getWorldSize();setInterval(()=>{if(this.missiles.size>=this.maxMissilePool)return;const n=Math.random()*t,r=Math.random()*i;this.missiles.add(new wt(new F(n,r),this.aircraft.position))},this.missileSpawnIntv)}drawGrid(t){t.strokeStyle="#444",t.lineWidth=1;let n=Math.floor(this.camera.position.x/100)*100,r=Math.floor(this.camera.position.y/100)*100;for(let s=n;s<this.camera.position.x+this.canvas.width;s+=100)t.beginPath(),t.moveTo(s,this.camera.position.y),t.lineTo(s,this.camera.position.y+this.canvas.height),t.stroke();for(let s=r;s<this.camera.position.y+this.canvas.height;s+=100)t.beginPath(),t.moveTo(this.camera.position.x,s),t.lineTo(this.camera.position.x+this.canvas.width,s),t.stroke()}getWorldSize(){return[this.canvas.width*this.worldSizeFactor,this.canvas.height*this.worldSizeFactor]}get canvasMidpoint(){return[this.canvas.width/2,this.canvas.height/2]}}Te();var Fi=ci('<main><canvas class="svelte-1tg252x"></canvas></main>');function Ri(e,t){Yt(t,!0);let i,n,r,s=Pt(I(window.innerWidth)),o=Pt(I(window.innerHeight));mi(()=>{if(!n){console.log("Canvas element not found !");return}const u=n.getContext("2d");if(!u){console.log("Failed to acquire 2D rendering context");return}r=new Ii(n),requestAnimationFrame(function f(l){i||(i=l);const d=l-i;i=l,r.update(d),r.render(u),requestAnimationFrame(f)}),window.addEventListener("resize",p)});function p(){A(s,I(window.innerWidth)),A(o,I(window.innerHeight))}var h=Fi(),a=Oe(h);wi(a,u=>n=u,()=>n),qe(()=>{Ft(a,"width",H(s)),Ft(a,"height",H(o))}),di(e,h),Wt()}pi(Ri,{target:document.getElementById("app")});
